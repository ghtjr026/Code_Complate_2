10장 변수 사용 시 고려할 사항들

o 데이터 초기화는 오류가 발생하기 쉽기 때문에 예상치 못한 초기 값으로 인해서 발생하는 문제를 피하기 위하여 이 장에서 설명한 초기화 기법을 사용한다.

o 각 변수의 범위를 최소화한다. 변수에 대한 참조를 가까이 둔다. 루틴이나 클래스로 제한하고 전역 데이터는 사용하지 않는다.

o 같은 변수를 사용하는 명령문은 가능한 한 가까지 둔다.

o 초기에 결합하면 유연성이 떨어지지만 코드가 복잡해지는 것을 막을 수 있고, 늦게 결합하면 코드는 복잡해지지만 코드를 좀 더 유연하게 개발할 수 있다.

o 변수는 한 가지 목적으로 사용한다.

 

변수 초기화 가이드라인

a. 변수를 선언할 때 초기화한다.

b. 변수가 처음 사용되는 곳 근처에서 초기화한다.

c. 이상적으로 각 변수가 처음 사용되는 곳 가까이에서 변수를 초기화하고 정의한다.

- 선언은 변수의 타입을 정한다. 정의는 변수에 구체적인 값을 할당한다.

d. 가능하다면 final이나 const를 사용한다.

- 자바의 final이나 c__의 const로 변수를 선언함으로써 변수가 초기화된 후에 다른 값으로 할당되는 것을 막을 수 있다. final과 const키워드는 클래스 상수와 입력만 가능한 매개변수, 초기화 후로 변경되지 않아야 하는 지역 변수를 정의하는 데 유용하다.

e. 카운터와 누산기를 특히 주의한다.

- I, j, k, sum, total 변수는 종종 카운터나 누산기로 사용한다. 초기화를 잊지말고 반드시 하자.

f. 클래스의 맴버 데이터를 생성자에서 초기화한다.

g. 다시 초기화해야 할 필요가 있는지 검사한다.

h. 이름 상수를 한 번 초기화하고 실행 코드로 변수를 초기화한다.

- 이름 상수를 모방하기 위한 변수를 사용하고 있다면 해당 변수를 프로그램의 시작 부분에서 초기화한 다음 사용하는 것이 좋다.

I. 모든 변수를 자동으로 초기화하는 컴파일러 설정을 사용한다.

- 그런 옵션이 지원된다면 컴파일러가 모든 변수를 자동으로 초기화하도록 설정하는 것이 컴파일러에 의존하는 가장 간단한 방법이다.

j. 컴파일러의 겨고 메시지를 활용한다.

k. 입력 매개변수의 유효성을 검사한다.

l. 메모리 접근 도구를 사용해 부적절한 포인터를 검사한다.

- 어떤 운영체제는 포인터가 유효하지 않은 메모리 영역을 참조하는지 검사한다. 하지만 이런 기능을 제공하지 않는 운영체제에서는 직접 해야 한다.

m. 프로그램을 시작할 때 메모리를 초기화한다.

 

변수의 “수명”을 가능한 짧게 유지해야 한다.

이점

a. 취약 구간을 줄일 수 있다.

- 변수의 값을 변경하려는 위치 사이에서 변수가 부정확하게 또는 부주의하게 변경될 가능성을 줄일 수 있다.

b. 코드를 쉽게 이해할 수 있다.

c. 초기화 오류가 발생할 가능성을 줄여준다.

- 프로그램을 수정하다 보면 일련의 코드를 반복문으로 변경하는 경우가 발생하는데 이때 루프에서 사용되는 값을 초기화하는 것을 잊을 수 있다.

d. 코드의 가독성이 높아진다.

e. 큰 루틴을 작은 루틴으로 나눌 때 유용하다.

 

범위를 최소화하기 위한 일반적인 가이드라인

a. 루프에서 사용되는 변수는 루프를 포함하고 있는 루틴의 시작이 아니라 루프 바로 앞에서 초기화한다.

b. 변수를 사용하기 바로 전까지 변수에 값을 할당하지 않는다.

c. 연관된 명령문을 그룹화한다.

이해하기 어려운 방법으로 두 변수 그룹을 사용하고 있는 c++ 예제

void SumarizeData(...)

{
...

GetOldData( oldData, &numOldData );

GetNewdata( newData, &numNewData );

totalOldData = Sum( oldData, numOldData );

totalNewData = Sum( newData, numNewData );

PrintOldDataSummary( oldData, totalOldData, numOldData );

PrintNewDataSummary( newData, totalNewOldData, numNewData );

...

}

 

이해하기 쉬운 방법으로 두 변수 그룹을 사용하고 있는 c++ 예제

void SumarizeData(...)

{
...

GetOldData( oldData, &numOldData );

totalOldData = Sum( oldData, numOldData );

PrintOldDataSummary( oldData, totalOldData, numOldData );

...

GetNewdata( newData, &numNewData );

totalNewData = Sum( newData, numNewData );

PrintNewDataSummary( newData, totalNewOldData, numNewData );

...

}

d. 연관된 명령문 그룹을 별도의 루틴으로 나눈다.

e. 처음에는 범위를 최대한 제한하고 필요한 경우에만 변수의 범위를 늘린다.

- 변수의 범위를 최소화하는 방법은 변수를 가능한 한 지역화하는 것이다. 작은 범위를 가진 변수의 범위를 늘리는 것보다 큰 범위를 가진 변수의 범위를 줄이는 것이 훨씬 어렵다.