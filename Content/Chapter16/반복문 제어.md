16장 반복문 제어

o 반복문은 복잡하다. 따라서 반복문을 간단하게 작성할수록 코드를 이해하기가 쉽다.

o 반복문을 간단하게 작성하는 기법은 특이한 모양의 반복문을 피하고 중첩을 최소화하며 진입과 탈출을 명확하게 만들고 보조 관리 코드를 한곳에 작성하는 것이다.

o 반복문 인덱스는 남용하기가 쉽다. 명확한 이름을 사용하고 한 가지 목적으로만 사용한다.

o 반복문이 모든 경우에 정상적으로 작동하고 모든 조건에 대해서 종료하는지 검증하기 위해서 신중하게 생각한다.

 

반복문 종류 선택

C, C++, C#, Java

반복문의 종류 유연성 테스트위치

for 유연함 시작

while 유연함 시작

do-while 유연함 끝

foreach 유연성이 없음 시작

*foreach는 C#, Java만 지원한다.

 

while 반복문을 사용하는 시기

a. 시작 부분에서 테스트하는 반복문

- 시작 부분에서 테스트하는 반복문의 경우, C++와 C#, Java, 비주얼 베이직을 비롯한 대부분 언어에서 while 반복문을 사용할 수 있다. while 반복문을 지원하지 않는 다른 언어에서는 while 반복문을 흉내 낼 수 있다.

 

b. 끝에서 테스트하는 반복문

- 때로는 유연하면서 최소한 한 번은 실행되어야 하는 반복문이 필요할 것이다. 그러한 경우에는 끝에서 테스트되는 while 반복문을 사용할 수 있다. C++, C#, Java에서는 do-while을 사용하고 비주얼 베이직에서는 Do-Loop-While을 사용하며 다른 언어에서는 끝에서 테스트되는 반복문을 흉내 낼 수 있다.

 

탈출이 가능한(Loop-With-Exit) 반복문을 사용하는 시기

a. 일반적인 탈출이 가능한 반복문

- 탈출이 가능한 반복문은 전형적으로 반복문의 시작이나 끝에서 하는 테스트가 중간에 조건문이 있는 반복문을 필요로 하는 경우에 사용한다. 탈출이 가능한 반복문을 사용할 때 고려해야 하는 상황이다.

첫째, 모든 종료 조건을 한 곳에 입력한다. 종료 조건을 분산시켜 높으면 사실상 하나 또는 그 이상의 종료 조건을 디버깅이나 수정, 테스팅 중에 못 보고 지나치게 된다.

둘째, 분명히 하기 위해서 주석을 사용한다. 탈출이 가능한 반복문 기법을 직접 지원하지 않는 언어에서 사용한다면 무엇을 하는지 의도가 분명하도록 주석을 작성한다.

 

반복문 진입

a. 한 위치에서만 반복문에 진입하라.

b. 반복문을 시작하기 바로 전에 초기화 코드를 입력하라.

- 연관된 명령문이 루틴의 여기저기에 퍼져 있다면 수정할 때 간과하거나 제대로 수정하지 못하기가 쉽다.

c. 무한 반복문에는 while( true )를 사용하라.

d. 적절하다면 for 반복문을 사용하라.

- for 반복문은 반복문 제어 코드를 한곳에 모아서 읽기 쉬운 반복문을 만든다. 소프트웨어를 변경할 때 개발자들이 흔히 저지르는 실수는 while 반복문의 상단에 있는 반복문 초기화 코드는 변경하면서 마지막에 있는 관련 코드를 변경하지 않는 것이다. for 반복문에서는 관계가 있는 모든 코드가 반복문의 상단에 모여 있기 때문에 변경 사항을 쉽게 수정할 수 있다.

e. while 반복문을 사용하는 게 더 적절할 때 for 반복문을 사용하지 말라.